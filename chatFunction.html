<!DOCTYPE html>
<html> 
  <script src="https://kit.fontawesome.com/56b24aa4ed.js" crossorigin="anonymous"></script>
  <head>
      <link rel="stylesheet" href="chatcss.css">

    <title>Online Medical Centre</title> <!-- This is the title of the site that shows up in the tab feel free to change it -->
    <link rel="stylesheet" href="WebsiteStyling.css"> <!-- The css file -->
	<link rel="stylesheet" href="chatcss.css">
    <script src="WebsiteScript.js"></script> <!-- the javascript file -->
    <link rel="icon" type="image/x-icon" href="favicon.ico"/> <!-- icon file -->
  </head> 
  <body>
    <!-- fixed top navigation bar -->
    <header>
      <div class="navigation" id="nav"> 
        <a id="websiteHeading" href="#websiteHeading" onclick="window.location.href='PAT-HomePage.htm'"><i class="fas fa-clinic-medical"></i><b> Online Medical Centre</b></a>
        <div class="navbar-right">
			<a href="#home" onclick="window.location.href='PAT-HomePage.htm'"><i class="fas fa-home"></i><b> Home</b></a>
			<a href="#consultations" onclick="window.location.href='PAT-ConsultationPage.htm'"><i class="fas fa-calendar-alt"></i><b> Consulations</b></a>
			<a href="#accountSettings" onclick="window.location.href='PAT-UserSettingPage.htm'"><i class="fas fa-user-cog"></i><b> My Account</b></a>
			<a href="#logout" onclick="window.location.href='index.html'"><i class="fas fa-sign-out-alt"></i><b> Log Out</b></a>
		</div>
        
        <!-- change to toggle menu if the window size is too small to fit top navigation bar comfortably -->
        <a href="javascript:void(0);" class="icon" onclick="navbarResize()"> 
          <i class="fa fa-bars"></i>
        </a>
      </div>
    </header>
    
    <!-- content body of website -->
    <div class="body">
      <section class="contentContainer">
  		<section class="msger">
		  <header class="msger-header">
			<div class="msger-header-title">
			  <i class="fas fa-comment-alt"></i> Support Chat
			</div>
			<div class="msger-header-options">
			  <span><i class="fas fa-cog"></i></span>
			</div>
		  </header>

		  <main class="msger-chat">
			<div class="msg left-msg">
			  <div
			   class="msg-img"
			   style="background-image: url(https://image.flaticon.com/icons/svg/327/327779.svg)"
			  ></div>

			  <div class="msg-bubble">
				<div class="msg-info">
				  <div class="msg-info-name">Helper BOT</div>
				  <div class="msg-info-time"></div>
				</div>

				<div class="msg-text">
				  Hi, welcome to Helper Chat! Go ahead and send me a message. ðŸ˜„ <br/>
				  1. I will be ready to receive documents. <br/>
				  2. Write a message for your docotor. <br/>
				  3. You need a quick analysis? <br/>
				  4. You have an emergency and need attention <br/>
				  5. Need help navigating the site? 
				</div>
			  </div>
			</div>

			<div class="msg right-msg">
			 <!-- <div
			   class="msg-img"
			   style="background-image: url(https://image.flaticon.com/icons/svg/145/145867.svg)"
			  ></div>

			  <div class="msg-bubble">
				<div class="msg-info">
				  <div class="msg-info-name">Jake</div>
				  <div class="msg-info-time">12:46</div>
				</div>

				<div class="msg-text">
				  You can change your name in JS section!
				</div>
			  </div>
			</div> -->
		  </main>

		  <form class="msger-inputarea">
			<input type="text" class="msger-input" id="message" placeholder="Enter your message...">
			<button type="submit" class="msger-send-btn">Send</button>
		  </form>
		</section>
		<script>
		  const msgerForm = get(".msger-inputarea");
		const msgerInput = get(".msger-input");
		const msgerChat = get(".msger-chat");


		const BOT_MSGS = [
		  "Hi, how are you?",
		  "Ohh... I can't understand what you trying to say. Sorry!",
		  "I like to play games... But I don't know how to play!",
		  "Sorry if my answers are not relevant. :))",
		  "I feel sleepy! :("
		]; 


		// Icons made by Freepik from www.flaticon.com
		const BOT_IMG = "https://image.flaticon.com/icons/svg/327/327779.svg";
		const PERSON_IMG = "https://image.flaticon.com/icons/svg/145/145867.svg";
		const BOT_NAME = "Helper BOT";
		const PERSON_NAME = "Jake";

		msgerForm.addEventListener("submit", event => {
		  event.preventDefault();

		  const msgText = msgerInput.value;
		  if (!msgText) return;

		  appendMessage(PERSON_NAME, PERSON_IMG, "right", msgText);
		  temp = msgText; 
		  msgerInput.value = "";

		  botResponse();
		});

		function appendMessage(name, img, side, text) {
		  //   Simple solution for small apps
		  const msgHTML = `
			<div class="msg ${side}-msg">
			  <div class="msg-img" style="background-image: url(${img})"></div>

			  <div class="msg-bubble">
				<div class="msg-info">
				  <div class="msg-info-name">${name}</div>
				  <div class="msg-info-time">${formatDate(new Date())}</div>
				</div>

				<div class="msg-text">${text}</div>
			  </div>
			</div>
		  `;

		  msgerChat.insertAdjacentHTML("beforeend", msgHTML);
		  msgerChat.scrollTop += 500;
		}
		function appendImageMessage(name, img, side, text) {
		  //   Simple solution for small apps
		  const msgHTML = `
			<div class="msg ${side}-msg">
			  <div class="msg-img" style="background-image: url(${img})"></div>

			  <div class="msg-bubble">
				<div class="msg-info">
				  <div class="msg-info-name">${name}</div>
				  <div class="msg-info-time">${formatDate(new Date())}</div>
				</div>

				<div class="msg-text"><a href=""><img src="uploadIcon2.png"></a></div>
			  </div>
			</div>
		  `;

		  msgerChat.insertAdjacentHTML("beforeend", msgHTML);
		  msgerChat.scrollTop += 500;
		}

		function botResponse() {
		 const r = random(0, BOT_MSGS.length - 1);
		  const msgText = BOT_MSGS[r];
		  switch (temp) {/*
		  if (temp == "1") {
			msg = "Please submit here";
		  }
		  */

		  case "1": 
			msg = "Please submit here"; 
			appendImageMessage(BOT_NAME, BOT_IMG, "left")
			break; 
		  case "2": 
			msg = "Enter message:"; 
			break; 
		  case "3":
		  msg = "Descibe symptoms and I will try my best to help.";
		  break; 
		  case "4": 
		  msg = "I will try to find an available doctor. This will be emailed to you. Please call 000 if it is needed.";
		  break; 
		  case "5": 
		  msg = "What troubles you?";
		  break; 
		  default: 
		  msg = "I cannot help sorry :(";
		  break; 
		}

		  
		  
		  const delay = msgText.split(" ").length * 100;

		  setTimeout(() => {
			appendMessage(BOT_NAME, BOT_IMG, "left", msg);
		  }, delay); 
		  temp = "";
		}

		// Utils
		function get(selector, root = document) {
		  return root.querySelector(selector);
		}

		function formatDate(date) {
		  const h = "0" + date.getHours();
		  const m = "0" + date.getMinutes();

		  return `${h.slice(-2)}:${m.slice(-2)}`;
		}

		function random(min, max) {
		  return Math.floor(Math.random() * (max - min) + min);
		}

		</script>
      </section>
    </div>
    
    <!-- fixed footer bar -->
    <div class="footer">
      <div class="etcDetails">
        <a href="MAIN-FAQPage.htm">FAQ</a>
        <a href="MAIN-Terms&ConditionsPage.htm">Terms &amp; Conditions</a>
        <a href="MAIN-PrivacyPage.htm">Privacy</a>
        <a href="MAIN-SecurityPage.htm">Security</a>
      </div>
      
      <p id="copyRight">&copy; 2020 Online Medical Centre - All Rights Reserved.</p>
    </div>
  </body>
</html>
